import p from"./chip8/index.js";import w from"./display.js";import y from"./info.js";import"./style/base.css.proxy.js";(async()=>{const r=document.getElementById("screen"),c=await fetch("./roms/test_opcode.ch8"),f=await c.blob(),m=new Uint8Array(await f.arrayBuffer()),e=new p(),i=new w(e,r),l=new y(e,document.getElementById("info")),d=1;let t=0;e.init(),e.loadGame(m),i.draw();let n=!1,a=!1;window.onkeydown=s=>{s.key==="c"&&(a=!0),s.key==="s"&&(n=!n),s.keyCode===32&&t++};const o=()=>{if(a)return;if(n&&t<d){requestAnimationFrame(o);return}t=0,l.update(),e.tick(),e.drawFlag&&i.draw(),requestAnimationFrame(o)};o()})();
